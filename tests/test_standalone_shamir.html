<!DOCTYPE html>
<html>
<head>
    <title>BSV Shamir Secret Sharing - Standalone Test</title>
    <meta charset="utf-8">
</head>
<body>
    <h1>BSV Shamir Secret Sharing - Standalone Module Test</h1>
    <div id="output"></div>

    <script src="bsv-shamir.min.js"></script>
    <script>
        function log(message) {
            document.getElementById('output').innerHTML += message + '<br>';
            console.log(message);
        }

        log('=== BSV Shamir Standalone Module Test ===');
        log('');

        try {
            if (typeof bsvShamir === 'undefined') {
                log('‚ùå bsvShamir not available');
            } else {
                log('‚úÖ bsvShamir loaded successfully');
                log('Version: ' + bsvShamir.version);
                log('Algorithm: ' + bsvShamir.algorithm);
                log('');

                // Test basic functionality
                var secret = 'Hello from Browser!';
                var threshold = 2;
                var shares = 4;

                log('üîê Testing secret splitting...');
                log('Secret: ' + secret);
                log('Threshold: ' + threshold + ', Total shares: ' + shares);

                var splitShares = bsvShamir.split(secret, threshold, shares);
                log('‚úÖ Split into ' + splitShares.length + ' shares');

                // Test reconstruction
                log('');
                log('üîì Testing secret reconstruction...');
                var reconstructed = bsvShamir.combine(splitShares.slice(0, threshold));
                var reconstructedSecret = reconstructed.toString();

                log('Reconstructed: ' + reconstructedSecret);
                
                if (reconstructedSecret === secret) {
                    log('‚úÖ Reconstruction successful!');
                } else {
                    log('‚ùå Reconstruction failed');
                }

                // Test share verification
                log('');
                log('üîç Testing share verification...');
                var validShares = 0;
                for (var i = 0; i < splitShares.length; i++) {
                    if (bsvShamir.verifyShare(splitShares[i])) {
                        validShares++;
                    }
                }
                log('Valid shares: ' + validShares + '/' + splitShares.length);

                // Run demo
                log('');
                log('üöÄ Running demo...');
                var demoResult = bsvShamir.demo();
                log('Demo completed: ' + (demoResult.success ? 'SUCCESS' : 'FAILED'));
                
                log('');
                log('üéâ All tests completed successfully!');
                log('üì¶ BSV Shamir Secret Sharing standalone module is working correctly.');
            }
        } catch (error) {
            log('‚ùå Error: ' + error.message);
            console.error('Full error:', error);
        }
    </script>
</body>
</html>